<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>班表切換</title>
<style>
  body{
    margin:0; padding:0;
    font-family:"Microsoft JhengHei",sans-serif;
    background:#f5f5f5; color:#000;
    display:flex; flex-direction:column; align-items:center;
  }
  h2 {
    margin: 6px 0 10px;
    font-size: 18px;
    text-align: center;
    width: 100%;
  }

/* 橫向月份按鈕列（可滑動） */
.month-switch{
  display:flex; gap:8px; align-items:center;
  padding:8px 6px;
  overflow-x:auto; overflow-y:hidden;
  -webkit-overflow-scrolling: touch;
  white-space:nowrap;
  background:transparent; /* 透明背景 */
  scrollbar-gutter: stable both-edges;
}

/* 透明卷軸：WebKit */
.month-switch::-webkit-scrollbar{ height:10px; }
.month-switch::-webkit-scrollbar-track{ background:transparent; } /* 透明軌道 */
.month-switch::-webkit-scrollbar-thumb{
  background: rgba(0,0,0,.28);
  border-radius:999px;
}
.month-switch:hover::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.42); }

/* Firefox */
.month-switch{ scrollbar-width:thin; scrollbar-color: rgba(0,0,0,.28) transparent; }

/* 按鈕樣式沿用你原本的設計，可微調 */
.month-switch button{
  padding:6px 14px; border:none; border-radius:999px;
  cursor:pointer; background:#999; color:#fff; font-size:14px;
  min-width:60px; text-align:center; flex:0 0 auto;
}
.month-switch button.active{ background:hwb(251 9% 58%); color:#fff; }

  .banner{
    margin:10px 0 6px; padding:6px 12px; border-radius:999px;
    background:#fff; border:1px solid #ddd; box-shadow:0 1px 2px rgba(0,0,0,.04);
    font-size:14px;
  }

  .frame {
    width: 95%;
    max-width: 95vw;
    margin: 10px auto;
    padding: 2px 5px;
    border: 2px solid #666;
    border-radius: 12px;
    overflow-x: auto;
    overflow-y: hidden;
    background: #fff;
    scroll-behavior: smooth;
  }
  /* 卷軸 */
  .frame::-webkit-scrollbar{ height:10px; opacity:0; transition:opacity 0.6s ease; }
  .frame::-webkit-scrollbar-track{ background:#eee; border-radius:10px; }
  .frame::-webkit-scrollbar-thumb{ background:#bbb; border-radius:10px; }
  .frame:hover::-webkit-scrollbar, .frame:active::-webkit-scrollbar{ opacity:1; }

  table {
    border-collapse: collapse;
    font-size: 14px;
    width: max-content;
  }
  th, td {
    border: 2px solid #bbbbbb;
    padding: 4px 6px;
    text-align: center;
    min-width: 42px;
    user-select: none;
  }
  thead th:first-child, tbody th{
    background:#eee; position:sticky; left:0; z-index:2;
  }

/* 班別顏色 */
.休{ background:#ddd; }

.特{ 
  background:#888; 
  color:#fff; 
}

/* 節慶／連續假期（像春節、初一～初六） */
.假{
  background:#d14141;
  color:#fff;
  font-weight:700;
}

/* ✅新增：日班（紅底白字） */
.日班{
  background:#d14141;  /* 紅底（跟 .假 同色系） */
  color:#fff;
  font-weight:700;
}

.weekend{ 
  background:#888; 
  color:#fff; 
}

  /* 今日日期號碼高亮 */
  .today-num{ background:#ffd700 !important; color:#000 !important; font-weight:bold; }

  /* 點擊橫列高亮 */
  .highlight-row td, .highlight-row th{ background:#90ee90 !important; color:#000 !important; }
  .highlight-row td.休{ background:#4caf50 !important; color:#000 !important; }
  .highlight-row td.特, .highlight-row td.weekend{ background:#2e7d32 !important; color:#fff !important; }

  /* 隱藏月份 */
  .month{ display:none; }
  .month.active{ display:block; }

.banner.subtitle {
  font-size: 13px;
  color: #888;          /* 淺灰色 */
  margin-top: -4px;     /* 貼近主標題 */
  background: none;     /* 移除背景 */
  border: none;         /* 移除邊框 */
  box-shadow: none;     /* 移除陰影 */
  padding: 0;           /* 去掉內距 */
}


</style>
</head>
<body>
<!-- 月份切換按鈕（交給 JS 動態產生） -->
<div class="month-switch"></div>


<!-- 顯示今天 -->
<div class="banner" id="nowText">今天：YYYY/MM/DD 星期_</div>
<div class="banner subtitle" id="subText"></div>


<!-- 12月份班表 -->
<div class="month" id="m12">
  <h2>12月份班表</h2>
  <div class="frame">
    <table id="schedule12" data-month="12">
      
      <thead>
        <tr>
          <th>日</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th><th>30</th><th>31</th>
        </tr>
        <tr id="weekRow12"><th>週</th></tr>
      </thead>
      <tbody>
<tr><th>賢</th><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>B</td><td class="休">休</td><td>A</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td>A</td><td class="休">休</td><td class="休">休</td><td>A</td><td>B</td><td>B</td><td>A</td><td class="特">特</td><td>B</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td></tr>
<tr><th>杰</th><td>A</td><td class="特">特</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td>A</td></tr>
<tr><th>宇</th><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td></tr>
<tr><th>强</th><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td></tr>
<tr><th>璍</th><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td class="特">特</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="特">特</td><td class="休">休</td><td>夜</td><td class="休">休</td><td>夜</td><td class="休">休</td></tr>
</tbody>
    </table>
  </div>
</div>


<!-- 1月份班表 -->
<div class="month" id="m1">
  <h2>1月份班表</h2>
  <div class="frame">
    <table id="schedule1" data-month="1">
      
      <thead>
        <tr>
          <th>日</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th><th>30</th><th>31</th>
        </tr>
        <tr id="weekRow1"><th>週</th></tr>
      </thead>
      <tbody>
<tr><th>賢</th><td>A</td><td>A</td><td>A</td><td class="特">特</td><td class="休">休</td><td class="特">特</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td class="特">喪假</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>A</td><td class="特">喪假</td><td class="休">休</td><td class="休">休</td><td>B</td><td>A</td><td>A</td><td>B</td><td class="休">休</td><td>A</td></tr>
<tr><th>杰</th><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td></tr>
<tr><th>宇</th><td>A</td><td class="休">休</td><td>B</td><td class="休">休</td><td>B</td><td class="特">特</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td class="休">休</td><td>B</td></tr>
<tr><th>强</th><td>B</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td>AB</td><td class="特">特</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B5.下</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td></tr>
        <tr><th>璍</th><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td></tr>
</tbody>
    </table>
  </div>
</div>


  <!-- 2月份班表 -->
<div class="month" id="m2">
  <h2>2月份班表</h2>
  <div class="frame">
    <table id="schedule2" data-month="2">
      
      <thead>
        <tr>
          <th>日</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th>
        </tr>
        <tr id="weekRow2"><th>週</th></tr>
      </thead>
      <tbody>
<tr class="note-row">
  <th>備註</th>
  <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
  <td></td><td></td><td></td>
  <td>春節</td>     <!-- 14 -->
  <td>小年夜</td>   <!-- 15 -->
  <td>除夕</td>     <!-- 16 -->
  <td>初一</td>     <!-- 17 -->
  <td>初二</td>     <!-- 18 -->
  <td>初三</td>     <!-- 19 -->
  <td>初四</td>     <!-- 20 -->
  <td>初五</td>     <!-- 21 -->
  <td>初六</td>     <!-- 22 -->
  <td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
        
<tr><th>賢</th><td>A</td><td>A</td><td>B</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td>A</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="日班">日班</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td></tr>
<tr><th>杰</th><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td>B</td><td class="日班">日班</td><td class="休">休</td><td class="日班">日班</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td></tr>
<tr><th>宇</th><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="日班">日班</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="日班">日班</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>B</td><td>B</td><td>B</td></tr>
<tr><th>强</th><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td>A</td><td>A</td><td class="休">休</td><td>A</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="休">休</td><td class="日班">日班</td><td class="日班">日班</td><td class="休">休</td><td class="休">休</td><td>B</td><td>B</td><td class="休">休</td><td>A</td><td>A</td><td>A</td></tr>
<tr><th>璍</th><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td class="休">休</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td>夜</td><td class="休">休</td><td>夜</td><td class="休">休</td><td>夜</td><td>夜</td><td class="特">特</td></tr>

</tbody>
    </table>
  </div>

  <!-- ✅ 2月垃圾清運公告（區塊置中、文字靠左） -->
<div class="banner subtitle"
     style="margin:8px auto 14px; line-height:1.7;
            width:fit-content; max-width:92vw;
            text-align:left; padding:8px 14px;">
  <div style="font-weight:700; color:#333; margin-bottom:4px; text-align:center;">
    2月垃圾清運調整
  </div>

  <div>2/14 (六)：正常清運</div>
  <div>2/15 (日) 小年夜：下午1:30開始清運</div>
  <div>2/16 (一) 除夕：上午8:30開始清運</div>
  <div>2/17 (二)～2/20 (五) 初一至初四：停止清運</div>
  <div>2/21 (六) 初五：上午8:30開始清運</div>
  <div>2/22 (日) 初六：休息日（停止清運）</div>
  <div>2/23 (一) 初七：恢復正常清運</div>
</div>

</div>



<script>
(function showNow(){
  const now = new Date();
  const y = now.getFullYear();
  const m = String(now.getMonth()+1).padStart(2,'0');
  const d = String(now.getDate()).padStart(2,'0');
  const wmap = ['日','一','二','三','四','五','六'];

  // 主標題
  document.getElementById('nowText').textContent =
    `今天：${y}/${m}/${d} 星期${wmap[now.getDay()]}`;

  // ====== 簡易對照表（到 2025/12） ======
  // 範例：key = "2025-10-10"
const info = {
 
  // ---------------------- 12月 (十月/十一月) ----------------------
  "2025-12-07": { lunar: "十月十八", jieqi: "大雪" },
  "2025-12-20": { lunar: "十一月初一" }, // 農曆十一月開始
  "2025-12-21": { lunar: "十一月初二", jieqi: "冬至" }, 
  "2025-12-25": { lunar: "十一月初六", holiday: "行憲紀念日" },
  "2025-12-31": { lunar: "十一月十二" },

// ---------------------- 1月 ----------------------
  "2026-01-01": { lunar: "冬月十三", holiday: "開國紀念日" },
  "2026-01-05": { lunar: "冬月十七", jieqi: "小寒" },
  "2026-01-20": { lunar: "臘月初二", jieqi: "大寒" },

  // ---------------------- 2月 ----------------------
  "2026-02-04": { lunar: "臘月十七", jieqi: "立春" },
  "2026-02-11": { lunar: "臘月廿四", holiday: "送神 (民俗)" },
  "2026-02-15": { lunar: "臘月廿八", holiday: "小年夜" },
  "2026-02-16": { lunar: "臘月廿九", holiday: "除夕" },
  "2026-02-17": { lunar: "正月初一", holiday: "春節" },
  "2026-02-18": { lunar: "正月初二", jieqi: "雨水" },
  "2026-02-25": { lunar: "正月初九", holiday: "天公生 (民俗)" },
  "2026-02-27": { lunar: "正月十一", holiday: "和平紀念日 (補假)" },
  "2026-02-28": { lunar: "正月十二", holiday: "和平紀念日" },

  // ---------------------- 3月 ----------------------
  "2026-03-03": { lunar: "正月十五", holiday: "元宵節 (民俗)" },
  "2026-03-05": { lunar: "正月十七", jieqi: "驚蟄" },
  "2026-03-19": { lunar: "二月初一" },
  "2026-03-20": { lunar: "二月初二", jieqi: "春分" },

  // ---------------------- 4月 ----------------------
  "2026-04-04": { lunar: "二月十七", holiday: "兒童節" },
  "2026-04-05": { lunar: "二月十八", jieqi: "清明", holiday: "清明節" },
  "2026-04-17": { lunar: "三月初一" },
  "2026-04-20": { lunar: "三月初四", jieqi: "穀雨" },

  // ---------------------- 5月 ----------------------
  "2026-05-01": { lunar: "三月十五", holiday: "勞動節" },
  "2026-05-05": { lunar: "三月十九", jieqi: "立夏" },
  "2026-05-17": { lunar: "四月初一" },
  "2026-05-21": { lunar: "四月初五", jieqi: "小滿" },

  // ---------------------- 6月 ----------------------
  "2026-06-05": { lunar: "四月二十", jieqi: "芒種" },
  "2026-06-15": { lunar: "五月初一" },
  "2026-06-19": { lunar: "五月初五", holiday: "端午節" },
  "2026-06-21": { lunar: "五月初七", jieqi: "夏至" },

  // ---------------------- 7月 ----------------------
  "2026-07-07": { lunar: "五月廿三", jieqi: "小暑" },
  "2026-07-14": { lunar: "六月初一" },
  "2026-07-23": { lunar: "六月初十", jieqi: "大暑" },

  // ---------------------- 8月 ----------------------
  "2026-08-07": { lunar: "六月廿五", jieqi: "立秋" },
  "2026-08-13": { lunar: "七月初一", holiday: "鬼門開 (民俗)" },
  "2026-08-19": { lunar: "七月初七", holiday: "七夕情人節 (民俗)" },
  "2026-08-23": { lunar: "七月十一", jieqi: "處暑" },
  "2026-08-27": { lunar: "七月十五", holiday: "中元節 (民俗)" },

  // ---------------------- 9月 ----------------------
  "2026-09-07": { lunar: "七月廿六", jieqi: "白露" },
  "2026-09-10": { lunar: "七月廿九", holiday: "鬼門關 (民俗)" },
  "2026-09-11": { lunar: "八月初一" },
  "2026-09-23": { lunar: "八月十三", jieqi: "秋分" },
  "2026-09-25": { lunar: "八月十五", holiday: "中秋節" },
  "2026-09-28": { lunar: "八月十八", holiday: "教師節" },

  // ---------------------- 10月 ----------------------
  "2026-10-08": { lunar: "八月廿八", jieqi: "寒露" },
  "2026-10-09": { lunar: "八月廿九", holiday: "國慶日 (補假)" },
  "2026-10-10": { lunar: "九月初一", holiday: "國慶日" },
  "2026-10-18": { lunar: "九月初九", holiday: "重陽節 (民俗)" },
  "2026-10-23": { lunar: "九月十四", jieqi: "霜降" },
  "2026-10-25": { lunar: "九月十六", holiday: "臺灣光復節" },
  "2026-10-26": { lunar: "九月十七", holiday: "臺灣光復節 (補假)" },

  // ---------------------- 11月 ----------------------
  "2026-11-07": { lunar: "九月廿九", jieqi: "立冬" },
  "2026-11-09": { lunar: "十月初一" },
  "2026-11-22": { lunar: "十月十四", jieqi: "小雪" },

  // ---------------------- 12月 ----------------------
  "2026-12-07": { lunar: "十月廿九", jieqi: "大雪" },
  "2026-12-09": { lunar: "十一月初一" },
  "2026-12-22": { lunar: "十一月十四", jieqi: "冬至" },
  "2026-12-25": { lunar: "十一月十七", holiday: "行憲紀念日" },
  "2026-12-31": { lunar: "十一月廿三" }
};

  const todayStr = `${y}-${m}-${d}`;
  let lunar = "";
  let jieqi = "";
  let holiday = "";

  if (info[todayStr]) {
    lunar   = info[todayStr].lunar   || "";
    jieqi   = info[todayStr].jieqi   || "";
    holiday = info[todayStr].holiday || "";
  }

  // 副標題組合
  let sub = "";
  if (lunar) sub += `農曆：${lunar}　`;
  if (jieqi) sub += `節氣：${jieqi}　`;
  if (holiday) sub += `假日：${holiday}`;
  document.getElementById('subText').textContent = sub.trim();
})();



  // 顯示電腦時間
  (function showNow(){
    const now = new Date();
    const y = now.getFullYear();
    const m = String(now.getMonth()+1).padStart(2,'0');
    const d = String(now.getDate()).padStart(2,'0');
    const wmap = ['日','一','二','三','四','五','六'];
    document.getElementById('nowText').textContent = `今天：${y}/${m}/${d} 星期${wmap[now.getDay()]}`;
  })();

  // 自動生成星期列
  function makeWeekRow(rowId, days, start){
    const wmap = ['日','一','二','三','四','五','六'];
    let weekRow = document.getElementById(rowId);
    for(let day=1; day<=days; day++){
      const wIndex = (start + (day-1)) % 7;
      const th = document.createElement("th");
      th.textContent = wmap[wIndex];
      if(wIndex===0 || wIndex===6) th.classList.add("weekend");
      weekRow.appendChild(th);
    }
  }

  // 12月份班表（12 月）
makeWeekRow("weekRow12", 31, 1); // 2025/12/1 星期一
// 1月份班表（1 月）
makeWeekRow("weekRow1", 31, 4); // 1/1 星期四
  // 2026年2月份班表（2026-02）
makeWeekRow("weekRow2", 28, 0); // 2026/02/1 星期日

  // 依「今天」自動切換到對應月份（進站就會生效）
// 自動切換到今天的月份
(function autoSwitchMonth(){
  const thisMonth = new Date().getMonth() + 1; // 1~12
  const btn = document.querySelector(`.month-switch button[data-target="m${thisMonth}"]`);
  const panel = document.getElementById(`m${thisMonth}`);
  if (btn && panel) {
    document.querySelectorAll(".month-switch button").forEach(b => b.classList.remove("active"));
    document.querySelectorAll(".month").forEach(m => m.classList.remove("active"));
    btn.classList.add("active");
    panel.classList.add("active");
  }
})();

// 依畫面上「.month」區塊自動建立對應按鈕（例如 m9, m10, m11）
(function buildMonthButtons(){
  const switcher = document.querySelector('.month-switch');
  const panels = Array.from(document.querySelectorAll('.month'));
  // 依 id 中的數字排序（m9, m10, m11...）
  panels.sort((a,b)=> Number(a.id.replace('m','')) - Number(b.id.replace('m','')));
  panels.forEach(panel=>{
    const mNum = Number(panel.id.replace('m',''));
    const btn = document.createElement('button');
    btn.dataset.target = panel.id;
    btn.textContent = `${mNum}月`;
    if (panel.classList.contains('active')) btn.classList.add('active');
    switcher.appendChild(btn);
  });

  // 事件委派：點擊按鈕切換月份
  switcher.addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-target]');
    if(!btn) return;
    // 切換 active 樣式
    document.querySelectorAll('.month-switch button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    // 顯示對應面板
    document.querySelectorAll('.month').forEach(m=>m.classList.remove('active'));
    document.getElementById(btn.dataset.target).classList.add('active');
    // 讓當前按鈕捲到可視
    btn.scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
  });
})();

// 進站自動切換到「今天的月份」面板，並把對應按鈕帶到視野中
(function autoSwitchMonth(){
  const thisMonth = new Date().getMonth() + 1; // 1~12
  const panel = document.getElementById(`m${thisMonth}`);
  const btn = document.querySelector(`.month-switch button[data-target="m${thisMonth}"]`);
  if (panel && btn) {
    document.querySelectorAll('.month').forEach(m=>m.classList.remove('active'));
    document.querySelectorAll('.month-switch button').forEach(b=>b.classList.remove('active'));
    panel.classList.add('active');
    btn.classList.add('active');
    // 把當月按鈕捲到中間
    btn.scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
  }
})();


// 高亮今天號碼（僅在該月，且自動切到該月面板）
function highlightToday(tableId){
  const table = document.getElementById(tableId);
  if (!table) return; // 沒這張表就跳過

  const today = new Date();
  const month = today.getMonth() + 1;   // 1~12
  const day = today.getDate();

  const tableMonth = Number(table.dataset.month);
  if (month !== tableMonth) return;     // 不是當月就不處理

  // 自動切到這個月份的面板 & 對應按鈕
  const panel = table.closest('.month');
  if (panel) {
    document.querySelectorAll('.month').forEach(m => m.classList.remove('active'));
    panel.classList.add('active');

    const mNum = panel.id.replace('m',''); // 例如 m10 → "10"
    const btn = document.querySelector(`.month-switch button[data-target="m${mNum}"]`);
    if (btn) {
      document.querySelectorAll('.month-switch button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      // 讓當月按鈕進入視野
      btn.scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
    }
  }

  // 在表頭第1列找今天的日期欄（跳過第一個“日”標題欄位）
  const ths = table.querySelectorAll("thead tr:first-child th");
  ths.forEach(th => {
    const n = Number(th.textContent);
    if (!Number.isNaN(n) && n === day) {
      th.classList.add("today-num");
      // 讓今天那一欄水平置中顯示
      th.scrollIntoView({behavior:"smooth", inline:"center", block:"nearest"});
    }
  });
}

// ✅ 不用一個一個打；自動找出所有 schedule 表格來執行
document.querySelectorAll('table[id^="schedule"]').forEach(tbl => {
  highlightToday(tbl.id);
});

document.querySelectorAll("tbody tr").forEach(row=>{
  row.addEventListener("click", ()=>{
    const isActive = row.classList.contains("highlight-row");
    // 清掉同一表格所有列的高亮
    row.parentElement.querySelectorAll("tr").forEach(r=>r.classList.remove("highlight-row"));
    // 如果剛才已經是高亮 → 不再加回去（等於取消）
    if (!isActive) {
      row.classList.add("highlight-row");
    }
  });
});

document.addEventListener("DOMContentLoaded", () => {

  // ===== 2) 備註列：只要文字是春節/小年夜/除夕/初一~初六 → 自動套 .假 =====
  const holidayKeywords = [
    "春節","小年夜","除夕",
    "初一","初二","初三","初四","初五","初六"
  ];

  // 掃描所有月份的備註列（不限2月）
  document.querySelectorAll("tr.note-row td").forEach(td => {
    const t = td.textContent.trim();
    if (!t) return;

    if (holidayKeywords.some(k => t.includes(k))) {
      td.classList.add("假");
    }
  });

});

// ✅補強：如果 td 文字是「日班」但沒有 class，也自動套上 .日班
document.querySelectorAll("tbody td").forEach(td=>{
  if (td.textContent.trim() === "日班") td.classList.add("日班");
});


</script>
</body>
</html>

















